#include <ultra64.h>
#include "sm64.h"
#include "behavior_data.h"
#include "model_ids.h"
#include "seq_ids.h"
#include "segment_symbols.h"
#include "level_commands.h"

#include "game/level_update.h"

#include "levels/scripts.h"

#include "actors/common1.h"

#include "make_const_nonconst.h"
#include "levels/ttc/header.h"
#include "level_misc_macros.h"
#include "macro_preset_names.h"
static const MacroObject local_macro_objects_ttc_1[] = {
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_rotating_prism,180,63311,59936,0,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_rotating_prism,315,2000,64436,64836,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_pushable_metal_box,45,64201,65086,1250,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_pushable_metal_box,45,63981,65086,1470,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_pit_block,45,64201,64586,1175,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_pit_block,45,64056,64586,1320,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_rotating_triangle,0,64236,64851,1750,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_rotating_triangle,180,64236,65006,1750,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_pendulum,45,64186,748,64328,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_pendulum,45,64846,901,64626,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_pendulum,45,64147,62506,64508,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_clock_hand,180,65286,60036,0,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_rotating_hexagon,180,65286,60131,0,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_small_treadmill,90,618,3656,148,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_small_treadmill,270,963,3297,608,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_small_treadmill,90,1306,2939,1069,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_large_treadmill,315,64757,64083,64344,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_push_block,180,174,1248,2040,2),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_push_block,45,64215,1490,63973,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_push_block,45,64460,1730,63728,5),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_push_block,45,64217,1970,63972,10),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_push_block,180,65019,3175,2040,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_push_block,180,65366,1248,2040,1),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_push_block,180,65021,1248,2040,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_push_block,0,65361,64185,63497,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_push_block,180,65021,62946,2040,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_push_block,180,518,3175,2040,3),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_push_block,180,65365,3175,2040,1),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_push_block,180,174,3175,2040,2),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_rotating_triangle,0,64236,65161,1750,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_rotating_triangle,180,64236,65316,1750,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_rotating_triangle,0,64236,65471,1750,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_heave_ho,0,900,61822,64496,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_heave_ho,135,64436,61536,64786,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_fire_spitter,0,63736,60336,0,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_heave_ho,31,1800,63461,65186,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_pit_block,315,64436,65465,64506,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_flamethrower,0,1743,63513,64636,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_heave_ho,0,63588,64086,700,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_chuckya,0,64330,61613,64628,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_flamethrower,0,63936,64001,1075,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_flamethrower,0,64456,64711,1573,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_floor_switch_hidden_objects,225,1250,65517,1250,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_hidden_box,45,64236,63336,64861,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_hidden_box,45,64036,63636,65061,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_pushable_metal_box,0,64021,64236,64971,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_coin_line_vertical,0,64036,750,1250,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_heave_ho,0,63820,1228,612,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_spinner,270,65286,3000,1875,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_spinner,270,0,3000,1875,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_spinner,270,250,3000,1875,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_spinner,270,500,3000,1875,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_rotating_prism,90,63736,6000,0,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_small_gear,0,1580,60682,64711,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_small_gear,0,63844,1022,64379,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_small_gear,0,2098,7007,2243,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_large_gear,0,1801,60693,64805,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_large_gear,0,64059,1044,64448,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_large_gear,0,2268,7030,2227,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_red_coin,0,940,62036,64496,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_red_coin,0,64436,62286,63886,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_red_coin,0,64286,63236,64286,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_red_coin,0,1400,62109,1400,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_red_coin,0,64486,64136,63936,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_red_coin,0,1875,3900,550,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_red_coin,0,64536,60236,1200,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_red_coin,0,0,6300,0,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_rotating_prism,135,64236,6000,1300,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_rotating_prism,180,0,6000,1800,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_elevator_platform,45,64286,63231,64286,2),
MACRO_OBJECT_WITH_BEH_PARAM(macro_homing_amp,0,63736,60236,0,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_blue_coin_switch,45,64333,65514,65366,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_hidden_blue_coin,0,0,0,64136,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_hidden_blue_coin,0,65286,0,63836,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_hidden_blue_coin,0,250,0,63836,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_hidden_blue_coin,0,0,0,63536,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_hidden_blue_coin,0,500,0,63536,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_hidden_blue_coin,0,65036,0,63536,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_heave_ho,270,63536,2678,0,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_heave_ho,270,63786,2675,0,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_coin_line_horizontal,45,64416,3125,1320,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_fire_spitter,0,64636,2000,63836,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_pushable_metal_box,45,63981,65386,1470,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_pushable_metal_box,45,64201,65386,1250,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_flamethrower,0,64036,300,1250,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_flamethrower,0,64686,60436,64336,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_flamethrower,0,64036,63336,65061,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_hidden_star_trigger,0,2098,7095,2243,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_hidden_star_trigger,0,63844,1500,64379,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_hidden_star_trigger,0,1580,60986,64711,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_hidden_star_trigger,0,376,4750,180,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_hidden_star_trigger,0,678,1800,1849,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_small_gear,0,678,1340,1849,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_hidden_blue_coin,0,0,0,63836,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_hidden_box,45,64436,63036,64661,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_flamethrower,45,1919,6191,1919,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_box_ten_coins,0,0,4783,0,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_circling_amp,0,100,3200,1850,2),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_spinner,270,750,3000,1875,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_bullet_bill_cannon,135,63486,62236,1525,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_heave_ho,315,250,61129,64686,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_flamethrower,0,64536,1000,63786,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_box_one_coin,0,500,60636,1750,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_circling_amp,180,64436,25,64506,2),
MACRO_OBJECT_WITH_BEH_PARAM(macro_box_ten_coins,0,65136,3600,1880,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_circling_amp,0,64436,25,64506,2),
MACRO_OBJECT_WITH_BEH_PARAM(macro_box_three_coins,45,64376,2920,64696,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_box_ten_coins,45,64756,6316,64516,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_rotating_prism,225,1300,6000,1300,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_small_gear,0,376,4470,180,0),
MACRO_OBJECT_END(),
};

static const LevelScript script_func_local_1[] = {
    OBJECT(/*model*/ MODEL_NONE,   /*pos*/ -1080,  -840,  1573, /*angle*/ 0,   0, 0, /*behParam*/ 0x00560000, /*beh*/ bhvPoleGrabbing),
    OBJECT(/*model*/ MODEL_THWOMP, /*pos*/  1919,  6191,  1919, /*angle*/ 0, 225, 0, /*behParam*/ 0x00000000, /*beh*/ bhvThwomp2),
    RETURN(),
};

static const LevelScript script_func_local_2[] = {
    OBJECT_WITH_ACTS(/*model*/ MODEL_STAR,   /*pos*/ -1450, -1130, -1050, /*angle*/ 0,   0, 0, /*behParam*/ 0x00000000, /*beh*/ bhvStar,                 /*acts*/ ALL_ACTS),
    OBJECT_WITH_ACTS(/*model*/ MODEL_STAR,   /*pos*/ -1850,   300,  -950, /*angle*/ 0,   0, 0, /*behParam*/ 0x01000000, /*beh*/ bhvStar,                 /*acts*/ ALL_ACTS),
    OBJECT_WITH_ACTS(/*model*/ MODEL_STAR,   /*pos*/ -1300, -2250, -1300, /*angle*/ 0,   0, 0, /*behParam*/ 0x02000000, /*beh*/ bhvStar,                 /*acts*/ ALL_ACTS),
    OBJECT_WITH_ACTS(/*model*/ MODEL_STAR,   /*pos*/  2200,  7300,  2210, /*angle*/ 0,   0, 0, /*behParam*/ 0x03000000, /*beh*/ bhvStar,                 /*acts*/ ALL_ACTS),
    OBJECT_WITH_ACTS(/*model*/ MODEL_STAR,   /*pos*/ -1050,  2400,  -790, /*angle*/ 0,   0, 0, /*behParam*/ 0x04000000, /*beh*/ bhvStar,                 /*acts*/ ALL_ACTS),
    OBJECT_WITH_ACTS(/*model*/ MODEL_NONE,   /*pos*/  1815, -3200,   800, /*angle*/ 0,   0, 0, /*behParam*/ 0x05000000, /*beh*/ bhvHiddenRedCoinStar, /*acts*/ ALL_ACTS),
    RETURN(),
};

const LevelScript level_ttc_entry[] = {
    INIT_LEVEL(),
    LOAD_MIO0(        /*seg*/ 0x07, _ttc_segment_7SegmentRomStart, _ttc_segment_7SegmentRomEnd),
    LOAD_MIO0_TEXTURE(/*seg*/ 0x09, _machine_mio0SegmentRomStart, _machine_mio0SegmentRomEnd),
    LOAD_MIO0(        /*seg*/ 0x05, _group1_mio0SegmentRomStart, _group1_mio0SegmentRomEnd),
    LOAD_RAW(         /*seg*/ 0x0C, _group1_geoSegmentRomStart,  _group1_geoSegmentRomEnd),
    LOAD_MIO0(        /*seg*/ 0x08, _common0_mio0SegmentRomStart, _common0_mio0SegmentRomEnd),
    LOAD_RAW(         /*seg*/ 0x0F, _common0_geoSegmentRomStart,  _common0_geoSegmentRomEnd),
    ALLOC_LEVEL_POOL(),
    MARIO(/*model*/ MODEL_MARIO, /*behParam*/ 0x00000001, /*beh*/ bhvMario),
    JUMP_LINK(script_func_global_1),
    JUMP_LINK(script_func_global_2),
    LOAD_MODEL_FROM_GEO(MODEL_TTC_ROTATING_CUBE,     ttc_geo_000240),
    LOAD_MODEL_FROM_GEO(MODEL_TTC_ROTATING_PRISM,    ttc_geo_000258),
    LOAD_MODEL_FROM_GEO(MODEL_TTC_PENDULUM,          ttc_geo_000270),
    LOAD_MODEL_FROM_GEO(MODEL_TTC_LARGE_TREADMILL,   ttc_geo_000288),
    LOAD_MODEL_FROM_GEO(MODEL_TTC_SMALL_TREADMILL,   ttc_geo_0002A8),
    LOAD_MODEL_FROM_GEO(MODEL_TTC_PUSH_BLOCK,        ttc_geo_0002C8),
    LOAD_MODEL_FROM_GEO(MODEL_TTC_ROTATING_HEXAGON,  ttc_geo_0002E0),
    LOAD_MODEL_FROM_GEO(MODEL_TTC_ROTATING_TRIANGLE, ttc_geo_0002F8),
    LOAD_MODEL_FROM_GEO(MODEL_TTC_PIT_BLOCK,         ttc_geo_000310),
    LOAD_MODEL_FROM_GEO(MODEL_TTC_PIT_BLOCK_UNUSED,  ttc_geo_000328),
    LOAD_MODEL_FROM_GEO(MODEL_TTC_ELEVATOR_PLATFORM, ttc_geo_000340),
    LOAD_MODEL_FROM_GEO(MODEL_TTC_CLOCK_HAND,        ttc_geo_000358),
    LOAD_MODEL_FROM_GEO(MODEL_TTC_SPINNER,           ttc_geo_000370),
    LOAD_MODEL_FROM_GEO(MODEL_TTC_SMALL_GEAR,        ttc_geo_000388),
    LOAD_MODEL_FROM_GEO(MODEL_TTC_LARGE_GEAR,        ttc_geo_0003A0),

    AREA(/*index*/ 1, ttc_geo_0003B8),
MACRO_OBJECTS(local_macro_objects_ttc_1),
WARP_NODE(241,6,2,103,0),
WARP_NODE(240,6,2,53,0),
WARP_NODE(10,14,1,10,0),
OBJECT_WITH_ACTS(0,800,-2300,800,0,0,0,0x5000000, bhvHiddenRedCoinStar
,63),
OBJECT_WITH_ACTS(122,-1050,2400,-790,0,0,0,0x4000000, bhvStar
,63),
OBJECT_WITH_ACTS(122,2200,7300,2210,0,0,0,0x3000000, bhvStar
,63),
OBJECT_WITH_ACTS(0,-250,-5250,0,0,0,0,0x2000000, bhvHiddenStar
,63),
OBJECT_WITH_ACTS(122,-1850,850,-950,0,0,0,0x1000000, bhvStar
,63),
OBJECT_WITH_ACTS(137,-2000,-1650,-650,0,45,0,0x80000, bhvExclamationBox
,63),
OBJECT_WITH_ACTS(88,1919,6191,1919,0,225,0,0x0, bhvThwomp2
,31),
OBJECT_WITH_ACTS(0,-1080,-840,1573,0,0,0,0x560000, bhvPoleGrabbing
,31),
OBJECT_WITH_ACTS(0,-2050,-5250,0,0,270,0,0xa0000, bhvSpinAirborneWarp
,31),
        TERRAIN(/*terrainData*/ ttc_seg7_collision_level),
        SET_BACKGROUND_MUSIC(/*settingsPreset*/ 0x0001, /*seq*/ SEQ_LEVEL_SLIDE),
        TERRAIN_TYPE(/*terrainType*/ TERRAIN_STONE),
    END_AREA(),

    FREE_LEVEL_POOL(),
    MARIO_POS(/*area*/ 1, /*yaw*/ 316, /*pos*/ 1417, -4822, -548),
    CALL(/*arg*/ 0, /*func*/ lvl_init_or_update),
    CALL_LOOP(/*arg*/ 1, /*func*/ lvl_init_or_update),
    CLEAR_LEVEL(),
    SLEEP_BEFORE_EXIT(/*frames*/ 1),
    EXIT(),
};
